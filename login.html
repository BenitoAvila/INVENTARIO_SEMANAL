<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login Inventario</title>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<style>
body{
font-family:Arial;
background:#1e3c72;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
margin:0;
color:white;
}
.card{
background:#203a43;
padding:30px;
border-radius:12px;
width:350px;
}
input,button{
width:100%;
padding:10px;
margin:8px 0;
border-radius:6px;
border:none;
}
button{
background:#00c853;
color:white;
font-weight:bold;
}
#error{
color:#ff5252;
}
</style>
</head>
<body>

<div class="card">
<h2>üîê Login Inventario</h2>

<input type="text" id="usuario" placeholder="Usuario">
<input type="password" id="password" placeholder="Contrase√±a">

<button onclick="login()">Ingresar</button>

<p id="error"></p>
</div>

<script>

const firebaseConfig = {
    apiKey: "AIzaSyBeg5PzCkaf98mmWiXrr6wpu8v-iWDj0t4",
    authDomain: "inventario-eurofert.firebaseapp.com",
    databaseURL: "https://inventario-eurofert-default-rtdb.firebaseio.com",
    projectId: "inventario-eurofert",
    storageBucket: "inventario-eurofert.firebasestorage.app",
    messagingSenderId: "786796692081",
    appId: "1:786796692081:web:c742cfbd1d23c3347f91d0"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function login(){

let usuario = document.getElementById("usuario").value;
let password = document.getElementById("password").value;

db.ref("usuarios/" + usuario).once("value", snapshot=>{

if(!snapshot.exists()){
document.getElementById("error").innerText="Usuario no existe";
return;
}

let data = snapshot.val();

if(data.password !== password){
document.getElementById("error").innerText="Contrase√±a incorrecta";
return;
}

localStorage.setItem("usuario", usuario);
localStorage.setItem("rol", data.rol);

if(data.rol === "admin"){
window.location="admin.html";
}else{
window.location="panel.html";
}

});

}

</script>

</body>
</html>